# しゃくとり法

## しゃくとり法が使える場面

しゃくとり法は、以下の形式の問題を解くときに使えるテクニック

長さnの数列a1, a2, ... anにおいて

- 「条件」を満たす区間のうち、最小の長さ
- 「条件」を満たす区間のうち、最大の長さ
- 「条件」を満たす区間を数え上げよ

愚直に全探索しようとするとn(n+1)/2個の区間があるためO(n^2)の計算量になるが、O(n)に改善する

## しゃくとり法のアイデア、実装

基本的な方針としては区間の左端がどこかで場合分けする

- 区間の左端leftを固定すると、条件を満たす右端rightはleftから始まる連続自然数になる

各端leftに対して、条件を満たす区間の右端rightの最大値も求めればよい
単純に
right = left, left+1, left+2...と調べて条件を満たさなくなる場所を検出する

しかし、各leftに対して最悪O(n)かかるので全体でO(n^2)になる

条件を満たす右端rightは単調に増加する
これを利用して高速化する

f(left)まで求まっているときに次のf(left+1)を求めるときは、right=f(left)から出発して条件を満たさなくなるまでインクリメント

